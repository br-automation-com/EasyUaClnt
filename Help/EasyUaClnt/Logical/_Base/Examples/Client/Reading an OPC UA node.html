<!DOCTYPE html>
<html>
<head>
    <title>Reading an OPC UA node</title>
    <link rel="stylesheet" href="C:\Projects\AS\BR\easyuaclient-as-project-dev-local\Help\EasyUaClnt\Logical\EasyUaClnt\styles.css">
    <base href="C:/Projects/AS/BR/easyuaclient-as-project-dev-local/Help/EasyUaClnt/Logical/_Base/" target="_blank">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="ORDER" content="0">
</head>
<body>
    <h1>Reading an OPC UA Node Using EasyUaRead</h1>
    <p>Program examples are developed on ARsim, B&R's simulation PLC.</p>

    <h2>Preparing the OPC UA Client</h2>
    <p>The OPC UA client is enabled in the Configuration View, under the active configuration, in the following file: <strong>Connectivity > OpcUaCs > UaCsConfig.uacfg</strong>.</p>
    <p>Parameter <strong>"OPC UA Client/Server"</strong> is set to <strong>"Enabled"</strong>. The parameter TCP port number is set to <strong>4841</strong>.</p>
    <p><img src="_img/enableopcuaclient1.png" alt="Enable OPC UA Client"></p>

    <h2>Adding EasyUaClt Library</h2>
    <p>In order to run the sample, EasyUaClt has to be imported using <strong>Toolbox > Existing Library</strong>.</p>
    <p><img src="_img/importeasyuacltlibrary.png" alt="Import EasyUaClt Library"></p>

    <h2>Sample Program on the Client</h2>
    <p>Program example <strong>"Read"</strong> runs on the PLC implementing the FUB EasyUaRead. It can be saved using the following link. Then it has to be imported in the client Automation Studio project.</p>
    <p><a href="_zip/Read.zip" target="_self">Read Sample Task</a></p>

    <h2>Reading the OPC UA Node</h2>
    <p>The OPC UA server node to read is <strong>VarX</strong> and the value will be written in the local variable <strong>VarA</strong>. The code on the server side regarding VarX is:</p>
    <pre class="SourceCode">
<font color="#0000FF" name="Courier" new="">PROGRAM _CYCLIC</font>
    VarX := VarX + 1;
<font color="#0000FF" name="Courier" new="">END_PROGRAM</font></pre>
    <p>Reading the node can be done by executing the FUB <strong>EasyUaRead_0</strong> by setting <strong>EasyUaRead_0.Execute</strong> to <strong>TRUE</strong>. This can be done from the Watch window of the Read task.</p>
    <p><img src="_img/readexecution.png" alt="Read Execution"></p>
</body>
</html>
