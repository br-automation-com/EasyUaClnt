<!DOCTYPE html>
<html lang="en">
<head>
    <title>Reading the OPC UA server conecction status</title>
    <link rel="stylesheet" href="C:\Projects\AS\BR\easyuaclient-as-project-dev-local\Help\EasyUaClnt\Logical\EasyUaClnt\styles.css">
    <base href="C:/Projects/AS/BR/easyuaclient-as-project-dev-local/Help/EasyUaClnt/Logical/_Base/" target="_blank">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="ORDER" content="0">
</head>
<body>
    <h1>Reading the OPC UA Server Connection Status Using EasyUaConnectionGetStatus</h1>
    <p>Program examples are developed on ARsim, B&R's simulation PLC.</p>

    <h2>Preparing the OPC UA Client</h2>
    <p>The OPC UA client is enabled in the Configuration View, under the active configuration, in the following file: <strong>Connectivity > OpcUaCs > UaCsConfig.uacfg</strong>.</p>
    <p>Parameter <strong>"OPC UA Client/Server"</strong> is set to <strong>"Enabled"</strong>. The parameter TCP port number is set to <strong>4841</strong>.</p>
    <p><img src="_img/enableopcuaclient1.png" alt="Enable OPC UA Client"></p>

    <h2>Adding EasyUaClt Library</h2>
    <p>In order to run the sample, EasyUaClt has to be imported using <strong>Toolbox > Existing Library</strong>.</p>
    <p><img src="_img/importeasyuacltlibrary.png" alt="Import EasyUaClt Library"></p>

    <h2>Sample Program on the Client</h2>
    <p>Program example <strong>"ConGetStat"</strong> runs on the PLC implementing the FUB EasyUaConnectionGetStatus. It can be saved using the following link. Then it has to be imported into the client Automation Studio project.</p>
    <p><a href="_zip/ConGetStat.zip" target="_self">ConGetStat Sample Task</a></p>

    <h2>Reading the OPC UA Server Connection Status</h2>
    <p>This reads the state of the connection and server as well as the service level of the OPC UA server.</p>
    <p>Reading the connection status can be done by executing the FUB <strong>EasyUaConnectionGetStatus_0</strong> by setting <strong>EasyUaConnectionGetStatus_0.Execute</strong> to <strong>TRUE</strong>. This can be done from the Watch window of the ConGetStat task.</p>
    <p><img src="_img/congetstatexecution.png" alt="Connection Status Execution"></p>
</body>
</html>
